<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pickaroo</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="app">
  <!-- header: title + inline question display -->
  <div class="app-header">
    <!-- Question of the week replaces the static title and uses the same heading style -->
    <h1 id="qDisplayValue" class="app-title" aria-live="polite">No question set</h1>
  </div>

    <section class="controls">
      <label class="input-row">
        <input id="nameInput" type="text" placeholder="Enter a name and press Add" maxlength="80" />
        <button id="addBtn">Add</button>
      </label>

      <label class="group-row">
        <textarea id="groupInput" rows="4" placeholder="Enter 3-10 names separated by newline or comma"></textarea>
        <div style="display:flex;gap:8px;margin-top:6px;align-items:center">
          <button id="addGroupBtn">Add group (3â€“10)</button>
          <small style="color:var(--muted);">Paste names, comma or newline separated</small>
        </div>
      </label>

      <div class="options">
        <label><input id="allowDuplicates" type="checkbox" checked /> Allow duplicates</label>
        <label><input id="persist" type="checkbox" checked /> Persist (localStorage)</label>
  <label><input id="removeAfterPick" type="checkbox" checked /> Exclude after pick (bingo mode)</label>
      </div>

      <div class="actions">
        <button id="pickBtn" class="primary">Pick a name</button>
        <button id="clearBtn">Clear all</button>
      </div>
    </section>

    <section class="pool">
      <h2>Pool (<span id="count">0</span>)</h2>
      <ul id="namesList" class="names-list" aria-live="polite"></ul>
    </section>

    <div id="result" class="result" aria-atomic="true"></div>
    <div id="message" class="message" role="status"></div>

    <!-- Question input moved to the bottom of the page -->
    <div class="question-inline" style="margin-top:18px;border-top:1px solid var(--muted);padding-top:12px">
      <label for="qInput" style="display:block;font-weight:600;margin-bottom:6px">Question of the week</label>
      <div style="display:flex;gap:8px;align-items:center">
        <input id="qInput" type="text" placeholder="Enter the question of the week" maxlength="250" style="flex:1" />
        <button id="saveQBtn">Save</button>
        <button id="clearQBtn">Clear</button>
      </div>
      <small style="color:var(--muted);display:block;margin-top:8px">Saved only when "Persist" is checked</small>
    </div>
  </main>

  <!-- live-update so qDisplay reflects input immediately -->
  <script>
    (function(){
      const Q_KEY = 'pickaroo:question';
      const qInput = document.getElementById('qInput');
      const qValue = document.getElementById('qDisplayValue');

      // init from localStorage (if persisted) or leave default
      try {
        const saved = localStorage.getItem(Q_KEY);
        if (saved) {
          if (qValue) qValue.textContent = saved;
          if (qInput) qInput.value = saved;
        }
      } catch (e) { /* ignore storage errors */ }

      // live update the header display as user types
      if (qInput && qValue) {
        qInput.addEventListener('input', () => {
          qValue.textContent = qInput.value.trim() || 'No question set';
        });
      }
    })();
  </script>

  <script src="script.js"></script>
</body>
</html>
